# Описание проекта: Two Sites for Websites DevOPS

![bitrix](src/screenshots/stroi.png)


## Часть 1: Настройка сервисов на сервере

Требуется провести более тонкую настройку отдельных сервисов. Результат данной работы должен выглядеть как diff-файл между стандартными настройками сервисов и доработанными в ходе тестового задания. Желательно приложить каталог с конфигурацией изменяемого сервиса.

## Часть 2: Задание по настройке Nginx:

- Настроить сжатие типов данных: text, javascript, css, json, xml
- Разрешить максимальную загрузку данных через Nginx в соответствии с настройками PHP
- Запретить вывод версии Nginx при web-запросах к сайтам сервера

## Часть 3: Задание по настройке Apache

- Запретить (глобально) возможность обращения пользователей к директориям вида .svn и .git
- Настроить работу Apache по порту 81 на локальном IP-адресе
- Уменьшить максимальное количество клиентов веб-сервера до 25

## Часть 4: Задание по настройке PHP

- Настроить параметры хранения сессий PHP таким образом, чтобы сессии сайтов жили минимум 1 сутки. После этого, с вероятностью 10%, сессии должны очищаться.
- Разрешить загрузку файлов через PHP с максимальным объемом - 64 Мб.

## Часть 5: Задание по настройке MySQL

- Выделить для кэша запросов 32 Мб ОЗУ
- Установить размер временных таблиц в 50 Мб
- Установить количество кэшированных потоков (нитей) не ниже 20
- Все InnoDB-таблицы должны храниться в отдельных файлах

## Часть 6: Настройка площадок на сервере

По результатам работы должно получиться 2 площадки под сайты, которые будут обслуживать сайты (site.ru и site-2.ru). Также должен работать PMA как алиас к обоим площадкам.

### Задание для site.ru

- Настроить связку Nginx+Apache2+PHP+MySQL для работы сайта (site.ru).
- Подготовить площадку под сайт на сервере и развернуть в ней CMS Битрикс.

- Настроить web-сервер таким образом, чтобы статические данные (изображения, видео, gif и др.) обрабатывались Nginx, а остальные запросы передавались на Apache2.
- Обеспечить передачу запросов, которые Nginx не смог обработать самостоятельно, на Apache2.

### Задание для site-2.ru

- Настроить связку Nginx+php-fpm для работы сайта (site-2.ru).
- Предусмотреть возможность переключения между версиями PHP через разные пулы fpm.
- Сайт должен работать от пользователя site-2.ru.
- Установить на площадке любой файловый менеджер на PHP для тестирования загрузки/удаления файлов.
- Проверить корректность доступа к загруженным файлам.

### Настройка phpMyAdmin как алиас:

- phpMyAdmin должен работать для любого сайта сервера простым добавлением /phpmyadmin к URL сайта (PMA как алиас).
- Использовать последнюю версию phpMyAdmin, скачанную с официального сайта.
- Обеспечить работу phpMyAdmin без ошибок и предупреждений для управления базами данных MySQL на данном сервере.
- Статические данные phpMyAdmin должны отдаваться веб-сервером Nginx.

## Результат выполнения тестового задания

- Ссылка на облачное хранилище, где хранится файл .tar.gz, содержащий директории и файлы с настройками (основные директории сервисов, которые подверглись модификации).
- Структура каталогов и файлов (/var/www/) для проверки созданных связок.

Если у вас есть какие-либо комментарии или вопросы по заданию, вы можете описать их в письме или прикрепить файл readme.md.

**Примечание:**
Площадка под сайт представляет собой директорию в /var/www/, в которой содержатся:
- Отдельная директория для кода сайта (DOC_ROOT)
- Структура директорий для хранения логов сайта
- Директория для хранения сессий сайта
- Директория для хранения временных файлов сайта

Тестовое задание необходимо выполнить в ОС Debian/Ubuntu/CentOS.

Пожалуй можно пойти отдохнуть на одной из площадок!

![bitrix](src/screenshots/stroi.png)

